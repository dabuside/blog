---
title: 10000+ 词条的大项目是如何大做国际化的
published: 2024-08-11
description: "i18n for big project"
image: ""
tags: ["i18n"]
category: "Tech"
draft: false
---

## Contents

## 简介

国际化通常被写为“i18n”（18 是英文单词 Internationalization 中“i”和“n”之间的字母数），是指采用特定实践来设计和开发应用程序，以便简化针对不同国家/地区、语言和文化的本地化工作。

1. 将所有文本，嵌套为国际化翻译函数，如`const enableText = $i('启用')`
2. 提供`CLI`命令行工具，基于`AST`语法分析，提取所有被国际化函数包裹的词条，如上述中的`启用`文本会被提取
3. 将需要翻译的词条提供给翻译人员进行翻译，得到`json`词条对照表，如`const en_us = {"启用": "enable"}`
4. 运行时翻译函数将对应文本根据语言环境信息翻译到对应语言

## 问题

### 词条与代码耦合

初期为了便捷编码，直接采用中文key当作语言的词条。这个做法最大的问题在于更新文案需要重新构建。

举个例子，假设产品需要将内置的策略名称显示，从**内置策略**改为**默认策略**，即修改代码文件`const policyName = $i('内置策略')` to `const policyName = $i('默认策略')`，再重新构建修改词条包方可上线。这样使得词条与代码耦合。

### 一词多义

在国际化过程中，一词多义的现象往往会带来翻译和理解上的挑战。例如，中文的“启用”在翻译成英文时，可以对应为“enable”或“enabled”，但两者表达的意义有所不同。

Enable: 作为动词，表示执行“启用”这一动作。例如，在指令中，“启用某功能”应被翻译为“enable a feature”，强调的是用户执行启用操作。

Enabled: 作为形容词，表示“启用”后的状态。例如，“功能已启用”应被翻译为“feature is enabled”，表达的是功能处于启用状态，而非正在执行启用的动作。

因此，在国际化过程中，准确区分“启用”在不同语境下的含义，选择恰当的翻译方式，能够帮助用户更好地理解并使用产品功能。

### 翻译效能

